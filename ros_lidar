FROM ros:noetic-ros-base
ARG DEBIAN_FRONTEND=noninteractive
RUN apt update
# RUN sh -c 'echo "deb http://packages.ros.org/ros/ubuntu $(lsb_release -sc) main" > /etc/apt/sources.list.d/ros-latest.list'
# RUN apt install curl
# RUN curl -s https://raw.githubusercontent.com/ros/rosdistro/master/ros.asc | apt-key add -
RUN apt update
RUN apt install -y ros-noetic-desktop-full
RUN apt install -y ros-noetic-slam-gmapping
## dependencies for lego loam
RUN wget -O ~/Downloads/gtsam.zip https://github.com/borglab/gtsam/archive/4.0.0-alpha2.zip
RUN cd ~/Downloads/ && unzip gtsam.zip -d ~/Downloads/
RUN cd ~/Downloads/gtsam-4.0.0-alpha2/
RUN mkdir build && cd build
RUN cmake ..
RUN make install
# CMake
RUN apt-get install -y cmake
# google-glog + gflags
RUN apt-get install -y libgoogle-glog-dev libgflags-dev
# Use ATLAS for BLAS & LAPACK
RUN apt-get install -y libatlas-base-dev
# Eigen3
RUN apt-get install -y libeigen3-dev
# SuiteSparse (optional)
RUN apt-get install -y libsuitesparse-dev
RUN tar zxf ceres-solver-2.1.0.tar.gz
RUN mkdir ceres-bin
RUN cd ceres-bin
RUN cmake ../ceres-solver-2.1.0
RUN make -j3
RUN make test
# Optionally install Ceres, it can also be exported using CMake which
# allows Ceres to be used without requiring installation, see the documentation
# for the EXPORT_BUILD_DIR option for more information.
RUN make install

RUN echo "done"