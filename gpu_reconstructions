FROM nvcr.io/nvidia/pytorch:25.11-py3

RUN apt update;apt install -y curl
RUN git clone --recursive https://github.com/ByteDance-Seed/Depth-Anything-3.git
WORKDIR Depth-Anything-3
RUN pip install xformers torch\>=2 torchvision --index-url https://download.pytorch.org/whl/cu130
RUN pip install -e . # Basic

RUN pip install --no-build-isolation git+https://github.com/nerfstudio-project/gsplat.git@0b4dddf04cb687367602c01196913cde6a743d70 # for gaussian head
WORKDIR da3_streaming
RUN echo $'faiss-gpu-cu12 \\n \
pandas \\n \
prettytable \\n \
einops \\n \
safetensors\\n \
numba \\n \
pypose' > requirements.txt

RUN pip install -r requirements.txt

