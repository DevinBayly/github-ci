FROM nvcr.io/nvidia/pytorch:25.11-py3

RUN apt update;apt install -y curl
RUN curl -Ls https://micro.mamba.pm/api/micromamba/linux-64/latest | tar -xvj bin/micromamba
ENV MAMBA_ROOT_PREFIX=$PWD
ENV PATH=$PWD/bin:$PATH
RUN git clone --recursive https://github.com/ByteDance-Seed/Depth-Anything-3.git
WORKDIR Depth-Anything-3
RUN eval "$(./bin/micromamba shell hook -s posix) && micromamba create -n da3 python=3.11 -y
RUN eval "$(./bin/micromamba shell hook -s posix) && micromamba activate da3
RUN micromamba env list
RUN pip install xformers torch\>=2 torchvision
RUN pip install -e . # Basic
