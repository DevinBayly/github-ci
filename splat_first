FROM nvcr.io/nvidia/pytorch:23.03-py3

ARG DEBIAN_FRONTEND=noninteractive

RUN apt update
RUN apt install -y curl



RUN apt install -y libglew-dev libassimp-dev libboost-all-dev libgtk-3-dev libopencv-dev libglfw3-dev libavdevice-dev libavcodec-dev libeigen3-dev libxxf86vm-dev libembree-dev wget


# get the inria repo
RUN git clone https://github.com/graphdeco-inria/gaussian-splatting --recursive

WORKDIR gaussian-splatting
RUN curl -Ls https://micro.mamba.pm/api/micromamba/linux-64/latest | tar -xvj bin/micromamba
ENV MAMBA_ROOT_PREFIX=/root
COPY splatting_environment.yaml environment.yml

RUN eval "$(./bin/micromamba shell hook -s posix)";micromamba env create --file environment.yml

