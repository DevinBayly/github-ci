FROM ghcr.io/devinbayly/vtk_ubuntu:latest

RUN apt-get install -y git cmake build-essential libgl1-mesa-dev libxt-dev python3-dev python3-numpy libopenmpi-dev libtbb-dev ninja-build
RUN alias ninja=ninja-build ; export PATH=$PATH:/usr/lib64/openmpi/bin/ ; git clone --recursive https://gitlab.kitware.com/paraview/paraview.git ; mkdir paraview_build ; cd paraview_build ; cmake -GNinja -DPARAVIEW_USE_PYTHON=ON -DPARAVIEW_USE_MPI=ON -DVTK_SMP_IMPLEMENTATION_TYPE=TBB -DCMAKE_BUILD_TYPE=Release ../paraview ; ninja
